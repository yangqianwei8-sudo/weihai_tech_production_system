# 左侧导航栏设计方案任务清单

## 一、设计方案核心要求检查

### 1. 整体结构分区 ✅ 部分完成

**要求**：
- **顶部区域（品牌区）**：Logo、全局搜索入口
- **中部区域（导航主体）**：核心功能菜单列表
- **底部区域（辅助功能区）**：折叠/展开控制、用户信息、系统版本

**当前状态**：
- ✅ 中部区域（导航主体）：已实现
- ❌ 顶部区域（品牌区）：未实现
- ❌ 底部区域（辅助功能区）：未实现

**任务**：
- [ ] **任务1.1**: 添加导航栏顶部区域（Logo展示区域）
- [ ] **任务1.2**: 添加导航栏底部区域（折叠/展开按钮、用户信息）
- [ ] **任务1.3**: 实现导航栏三区域布局结构

---

### 2. 信息层级展示 ✅ 已实现

**要求**：
- 一级菜单：左侧对齐，带图标和文字标签
- 二级菜单：缩进20-24px显示，文字字号略小
- 当前选中状态：清晰标记当前页面及所有上级菜单

**当前状态**：
- ✅ 一级菜单：已实现
- ✅ 二级菜单：已实现（缩进44px，符合要求）
- ✅ 激活状态：已实现（使用`data-active="true"`）

**任务**：
- ✅ 无需修改

---

### 3. 视觉设计规范 ✅ 已实现

**要求检查**：

| 设计规范项 | 要求值 | 当前实现 | 状态 |
|-----------|--------|---------|------|
| 导航栏宽度（展开） | 240-280px | 240px | ✅ 符合 |
| 导航栏宽度（折叠） | 60-80px | 80px | ✅ 符合 |
| 菜单项高度 | 44-52px | 44px | ✅ 符合 |
| 一级菜单字体 | 14-16px | 15px | ✅ 符合 |
| 二级菜单字体 | 13-15px | 14px | ✅ 符合 |
| 图标尺寸 | 18-20px | 18px | ✅ 符合 |
| 菜单项垂直间距 | 4-8px | 4px | ✅ 符合 |
| 文字与图标间距 | 8-12px | 12px | ✅ 符合 |
| 一级菜单左侧内边距 | 16-20px | 16px | ✅ 符合 |
| 二级菜单缩进 | 20-24px | 44px（一级20px+二级24px） | ✅ 符合 |

**颜色体系**：
- ✅ 背景色：白色（var(--vh-card-bg)）
- ✅ 文字色：黑色（var(--vh-text)）
- ✅ 悬停状态：浅灰色背景
- ✅ 激活状态：品牌色+浅色背景

**任务**：
- ✅ 无需修改

---

### 4. 交互行为设计 ✅ 部分完成

**要求**：

| 交互项 | 要求 | 当前实现 | 状态 |
|-------|------|---------|------|
| 点击一级菜单（无子项） | 直接跳转 | ✅ 已实现 | ✅ |
| 点击一级菜单（有子项） | 展开/收起子菜单 | ✅ 已实现 | ✅ |
| 点击子菜单项 | 跳转并高亮路径 | ✅ 已实现 | ✅ |
| 子菜单展开/收起动画 | 0.15-0.25s | ✅ 0.2s | ✅ |
| 导航栏展开/折叠 | 0.2-0.3s | ✅ 已实现 | ✅ |
| 状态切换动画 | 平滑过渡 | ✅ 已实现 | ✅ |

**任务**：
- ✅ 核心交互已实现
- [ ] **任务4.1**: 优化子菜单展开时自动收起其他子菜单（可选功能，当前代码中已注释）

---

### 5. 响应式适配策略 ❌ 未完全实现

**要求检查**：

| 设备类型 | 宽度范围 | 要求 | 当前实现 | 状态 |
|---------|---------|------|---------|------|
| 大屏幕桌面端 | ≥1200px | 左侧导航栏常驻，默认展开 | ✅ 已实现 | ✅ |
| 小屏幕桌面端/大平板 | 768-1199px | 默认折叠模式或可呼出的抽屉 | ❌ 未实现 | ❌ |
| 平板设备 | 576-767px | 隐藏固定导航，使用汉堡菜单 | ❌ 未实现 | ❌ |
| 手机设备 | ≤575px | 完全不显示左侧导航，使用底部标签栏或汉堡菜单 | ❌ 未实现 | ❌ |

**任务**：
- [ ] **任务5.1**: 实现小屏幕桌面端（768-1199px）的导航栏折叠/抽屉模式
- [ ] **任务5.2**: 实现平板设备（576-767px）的汉堡菜单功能
- [ ] **任务5.3**: 实现手机设备（≤575px）的底部标签栏或汉堡菜单
- [ ] **任务5.4**: 添加响应式JavaScript控制逻辑

---

### 6. 各模块统一改造 ❌ 未完成

**要求**：所有前端功能模块的导航栏统一使用新设计方案

**当前状态**：
- ✅ 交付管理（delivery_customer）：已改造
- ❌ 客户管理（customer_management）：未改造
- ❌ 生产管理（production_management）：未改造
- ❌ 财务管理（financial_management）：未改造
- ❌ 人事管理（personnel_management）：未改造
- ❌ 行政管理（administrative_management）：未改造
- ❌ 计划管理（plan_management）：未改造
- ❌ 诉讼管理（litigation_management）：未改造
- ❌ 其他模块：未检查

**任务**：
- [ ] **任务6.1**: 改造客户管理模块导航栏
- [ ] **任务6.2**: 改造生产管理模块导航栏
- [ ] **任务6.3**: 改造财务管理模块导航栏
- [ ] **任务6.4**: 改造人事管理模块导航栏
- [ ] **任务6.5**: 改造行政管理模块导航栏
- [ ] **任务6.6**: 改造计划管理模块导航栏
- [ ] **任务6.7**: 改造诉讼管理模块导航栏
- [ ] **任务6.8**: 检查并改造其他模块导航栏

**每个模块改造的具体步骤**：
1. 更新HTML结构（`sidenav-group` → `sidenav-item` + `submenu`）
2. 统一激活标记（`active` 类 → `data-active="true"`）
3. 移除额外类名（如 `delivery-sidebar`、`customer-sidebar` 等）
4. 清理自定义样式（删除覆盖标准样式的CSS）
5. 添加JavaScript引用（`sidebar.js`）
6. 测试验证（显示、交互、激活状态、响应式）

---

### 7. 首页导航栏改造 ❌ 需要检查

**要求**：首页导航栏也需要符合新设计方案

**当前状态**：
- ⚠️ 首页使用 `home.html`，需要检查是否符合新规范
- ⚠️ 可能存在内联样式覆盖标准样式

**任务**：
- [ ] **任务7.1**: 检查首页（home.html）导航栏实现
- [ ] **任务7.2**: 如有需要，改造首页导航栏符合新规范
- [ ] **任务7.3**: 清理首页中的内联样式（如有）

---

### 8. JavaScript功能完善 ✅ 基础完成

**当前实现**：
- ✅ 子菜单展开/收起
- ✅ 自动展开包含激活项的子菜单
- ✅ 导航栏折叠/展开功能（代码已实现）

**需要完善**：
- [ ] **任务8.1**: 添加导航栏折叠/展开的UI控制按钮（底部区域）
- [ ] **任务8.2**: 添加响应式设备检测和自动切换逻辑
- [ ] **任务8.3**: 优化子菜单展开时的用户体验（可选：自动收起其他项）

---

### 9. 样式文件检查 ✅ 已完成

**要求**：
- 统一使用 `css/common.css`（包含 `workspace.css`）
- 不允许覆盖标准样式

**当前状态**：
- ✅ `workspace.css` 已更新为新设计规范
- ✅ `common.css` 已导入 `workspace.css`
- ⚠️ 各模块可能仍有自定义样式覆盖标准样式

**任务**：
- [ ] **任务9.1**: 检查各模块base.html是否有覆盖标准样式的CSS
- [ ] **任务9.2**: 清理各模块的自定义样式（如交付管理已完成）

---

### 10. 文档和测试 ❌ 部分完成

**任务**：
- ✅ **任务10.1**: 创建标准模板片段（已完成）
- [ ] **任务10.2**: 编写使用文档（如何使用标准模板）
- [ ] **任务10.3**: 编写开发规范文档（禁止覆盖标准样式等）
- [ ] **任务10.4**: 功能测试（所有模块）
- [ ] **任务10.5**: 视觉测试（确保所有模块一致）
- [ ] **任务10.6**: 响应式测试（不同设备尺寸）

---

## 二、任务优先级分类

### 高优先级（P0 - 必须完成）

1. **任务6系列**：各模块统一改造（核心功能）
2. **任务7系列**：首页导航栏检查改造
3. **任务9系列**：清理覆盖标准样式的CSS

### 中优先级（P1 - 重要功能）

4. **任务1系列**：添加顶部和底部区域（完善结构）
5. **任务5系列**：响应式适配（提升用户体验）
6. **任务8.1**：添加折叠/展开UI控制按钮

### 低优先级（P2 - 可选优化）

7. **任务4.1**：优化子菜单交互（自动收起其他项）
8. **任务8.2-8.3**：JavaScript功能优化
9. **任务10.2-10.3**：文档编写

---

## 三、实施建议

### 第一阶段：核心功能统一（1-2周）

1. 完成所有模块的导航栏改造（任务6系列）
2. 检查并改造首页导航栏（任务7系列）
3. 清理所有覆盖标准样式的CSS（任务9系列）
4. 功能测试和视觉测试（任务10.4-10.5）

### 第二阶段：结构完善（1周）

5. 添加导航栏顶部和底部区域（任务1系列）
6. 添加折叠/展开UI控制按钮（任务8.1）

### 第三阶段：响应式适配（1-2周）

7. 实现响应式适配（任务5系列）
8. 响应式测试（任务10.6）

### 第四阶段：优化和完善（可选）

9. JavaScript功能优化（任务4.1、8.2-8.3）
10. 文档编写（任务10.2-10.3）

---

## 四、任务统计

- **已完成任务**: 4项
- **待完成任务**: 约25项
- **高优先级任务**: 约15项
- **中优先级任务**: 约6项
- **低优先级任务**: 约4项

---

## 五、注意事项

1. **渐进式改造**：建议一个模块一个模块地改造，确保每个模块改造后都进行测试
2. **不要破坏现有功能**：改造时确保所有功能仍然正常工作
3. **保持数据结构一致**：确保后端返回的数据结构符合标准格式
4. **充分测试**：每个模块改造后都要进行完整的功能测试和视觉检查
5. **代码审查**：重要修改需要进行代码审查

---

**最后更新**: 2025年1月
**检查依据**: 左侧经典导航栏设计方案

