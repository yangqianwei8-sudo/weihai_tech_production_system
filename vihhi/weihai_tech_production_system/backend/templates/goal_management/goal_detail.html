{% extends "goal_management/_base.html" %}

{% block pm_title %}战略目标详情{% endblock %}
{% block pm_subtitle %}{{ goal.name }}{% endblock %}

{% block pm_actions %}
<a class="btn btn-secondary" href="{% url 'plan_pages:strategic_goal_list' %}">返回列表</a>
{% if can_edit %}
<a class="btn btn-danger" href="{% url 'plan_pages:strategic_goal_edit' goal.id %}">编辑</a>
{% endif %}
{% endblock %}

{% block pm_content %}
<div class="card"><div class="card-body">
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">

    <div>
      <div style="color:#666;font-size:12px;">目标名称</div>
      <div style="font-weight:700;">{{ goal.name }}</div>
    </div>

    <div>
      <div style="color:#666;font-size:12px;">状态</div>
      {% with s=goal.status %}
        <span class="badge-status
          {% if s == 'draft' %}badge-draft
          {% elif s == 'published' %}badge-published
          {% elif s == 'in_progress' %}badge-in_progress
          {% elif s == 'completed' %}badge-completed
          {% elif s == 'cancelled' %}badge-cancelled
          {% else %}badge-draft{% endif %}">
          {{ goal.get_status_display|default:goal.status }}
        </span>
      {% endwith %}
    </div>

    {% if goal.goal_number %}
    <div>
      <div style="color:#666;font-size:12px;">目标编号</div>
      <div>{{ goal.goal_number }}</div>
    </div>
    {% endif %}

    {% if goal.responsible_person %}
    <div>
      <div style="color:#666;font-size:12px;">负责人</div>
      <div>{{ goal.responsible_person.full_name|default:goal.responsible_person.username }}</div>
    </div>
    {% endif %}

    {% if goal.start_date %}
    <div>
      <div style="color:#666;font-size:12px;">开始日期</div>
      <div>{{ goal.start_date|date:"Y-m-d" }}</div>
    </div>
    {% endif %}

    {% if goal.end_date %}
    <div>
      <div style="color:#666;font-size:12px;">结束日期</div>
      <div>{{ goal.end_date|date:"Y-m-d" }}</div>
    </div>
    {% endif %}

    {% if goal.description %}
    <div style="grid-column:1 / -1;">
      <div style="color:#666;font-size:12px;">目标描述</div>
      <div style="white-space:pre-wrap;">{{ goal.description }}</div>
    </div>
    {% endif %}

  </div>
  </div>
</div>
{% endblock %}
