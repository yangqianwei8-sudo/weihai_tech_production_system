{% extends "shared/module_base.html" %}
{% load static %}

{% comment %}
  åˆ—è¡¨é¡µé¢åŸºç¡€æ¨¡æ¿
  æä¾›ç»Ÿä¸€çš„åˆ—è¡¨é¡µé¢ç»“æ„ï¼ŒåŒ…æ‹¬ç»Ÿè®¡å¡ç‰‡ã€ç­›é€‰å™¨ã€è¡¨æ ¼ã€åˆ†é¡µç­‰æ¨¡å—
  ä½¿ç”¨ list-layout.css æ ·å¼ç³»ç»Ÿ
{% endcomment %}

{% block module_styles %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/layouts/list-layout.css' %}">
  <link rel="stylesheet" href="{% static 'css/components/list_page_base_v2.css' %}">
{% endblock module_styles %}

{% block pm_content %}
  {# ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ - æ˜¾ç¤ºå…³é”®æŒ‡æ ‡ #}
  {% block list_stats_section %}
  <div class="list-page-stats">
    {% block list_stats_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ ç»Ÿè®¡å¡ç‰‡ #}
    {% endblock list_stats_content %}
  </div>
  {% endblock list_stats_section %}

  {# æ“ä½œæ  - é¡¶éƒ¨æ“ä½œæŒ‰é’®å’Œæœç´¢ #}
  {% block list_action_bar_section %}
    {% block list_action_bar_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ æ“ä½œæ  #}
    {% endblock list_action_bar_content %}
  {% endblock list_action_bar_section %}

  {# å·¥å…·æ  - æ‰¹é‡æ“ä½œæ  #}
  {% block list_toolbar_section %}
    {% block list_toolbar_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ å·¥å…·æ å’Œæ‰¹é‡æ“ä½œ #}
    {% endblock list_toolbar_content %}
  {% endblock list_toolbar_section %}

  {# ç­›é€‰å™¨åŒºåŸŸ #}
  {% block list_filters_section %}
  <div class="list-page-filters">
    <div class="list-page-filter-row">
    {% block list_filters_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ ç­›é€‰å™¨è¡¨å• #}
    {% endblock list_filters_content %}
    {% block list_filter_actions %}
    <!-- ç­›é€‰å’Œé‡ç½®æŒ‰é’® - è‡ªåŠ¨æ·»åŠ åˆ°æ‰€æœ‰ç­›é€‰è¡¨å• -->
    <div class="list-page-filter-actions">
        <button type="submit" form="filterForm" class="btn btn-primary">
            <i class="bi bi-funnel"></i> ç­›é€‰
        </button>
        <button type="reset" form="filterForm" class="btn btn-secondary">
            <i class="bi bi-arrow-counterclockwise"></i> é‡ç½®
        </button>
    </div>
    {% endblock list_filter_actions %}
    </div>
  </div>
  {% endblock list_filters_section %}

  {# è¡¨æ ¼åŒºåŸŸ #}
  {% block list_table_section %}
    {% block list_table_content %}
      {# å¦‚æœæä¾›äº† columns å’Œ dataï¼Œä½¿ç”¨ list_table.html æ¨¡æ¿ #}
      {% if columns and data %}
        {% include "shared/list_table.html" with 
          table_id=table_id|default:"dataTable"
          columns=columns 
          data=data 
          show_checkbox=show_checkbox|default:False
          show_actions=show_actions|default:True
          action_template=action_template|default:""
          empty_message=empty_message|default:"æš‚æ— æ•°æ®"
          show_pagination=False
          pagination_params=request.GET.dict
          table_class=table_class|default:""
          column_settings_btn=column_settings_btn|default:False
        %}
      {% else %}
        {# å¦åˆ™ä½¿ç”¨ä¼ ç»Ÿçš„ block æ–¹å¼ï¼ˆå‘åå…¼å®¹ï¼‰ #}
        <div class="list-table-container">
          <table class="list-table">
            <thead>
              <tr>
                {% block list_table_headers %}
                  {# å­æ¨¡æ¿éœ€è¦åœ¨æ­¤å®šä¹‰è¡¨å¤´ #}
                {% endblock list_table_headers %}
              </tr>
            </thead>
            <tbody>
              {% block list_table_rows %}
                {# é»˜è®¤ç©ºçŠ¶æ€ #}
                <tr>
                  <td colspan="100%" class="list-empty">
                    <div class="list-empty-icon">ğŸ“‹</div>
                    <div class="list-empty-text">æš‚æ— æ•°æ®</div>
                    {% block list_empty_hint %}
                      {# å­æ¨¡æ¿å¯ä»¥æ·»åŠ ç©ºçŠ¶æ€æç¤ºæ–‡å­— #}
                    {% endblock list_empty_hint %}
                  </td>
                </tr>
              {% endblock list_table_rows %}
            </tbody>
          </table>
        </div>
      {% endif %}
    {% endblock list_table_content %}
  {% endblock list_table_section %}

  {# åŠ è½½çŠ¶æ€ #}
  {% block list_loading_section %}
    {% block list_loading_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ åŠ è½½çŠ¶æ€ #}
    {% endblock list_loading_content %}
  {% endblock list_loading_section %}

  {# é”™è¯¯çŠ¶æ€ #}
  {% block list_error_section %}
    {% block list_error_content %}
      {# å­æ¨¡æ¿å¯ä»¥è¦†ç›–æ­¤å—æ·»åŠ é”™è¯¯çŠ¶æ€ #}
    {% endblock list_error_content %}
  {% endblock list_error_section %}

  {# åˆ†é¡µåŒºåŸŸ #}
  {% block list_pagination_section %}
    {% if page_obj and page_obj.has_other_pages %}
      <div class="list-pagination">
        {% block list_pagination_content %}
          {% include "shared/_pagination.html" %}
        {% endblock list_pagination_content %}
      </div>
    {% endif %}
  {% endblock list_pagination_section %}
{% endblock pm_content %}
