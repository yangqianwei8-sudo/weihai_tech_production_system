{% load static %}

<aside class="vh-sb" aria-label="左侧栏（全屏固定）">
  <div class="vh-sb__top">
    <div class="vh-sb__topInner">
      <div class="vh-sb__titleWrap">
        <div class="vh-sb__title">{% block sidebar_title %}计划管理{% endblock %}</div>
        <div class="vh-sb__sub">{% block sidebar_subtitle %}Plan Management{% endblock %}</div>
      </div>
    </div>
  </div>

  <nav class="vh-sb__nav">
    {% if plan_menu or module_sidebar_nav %}
      {% with menu_items=plan_menu|default:module_sidebar_nav %}
        {% for item in menu_items %}
          {% if item.children %}
            <div class="vh-sb__parent">
              <a href="{{ item.url }}" class="vh-sb__item vh-sb__item--parent {% if item.active %}is-active{% endif %}">
                <span class="vh-sb__icon">{{ item.icon|default:"▢" }}</span>
                <span class="vh-sb__label">{{ item.label }}</span>
              </a>
              <div class="vh-sb__children">
                {% for child in item.children %}
                  <a href="{{ child.url }}" class="vh-sb__child {% if child.active %}is-active{% endif %}">
                    <span class="vh-sb__icon">{{ child.icon|default:"·" }}</span>
                    <span class="vh-sb__label">{{ child.label }}</span>
                  </a>
                {% endfor %}
              </div>
            </div>
          {% else %}
            <a href="{{ item.url }}" class="vh-sb__item {% if item.active %}is-active{% endif %}">
              <span class="vh-sb__icon">{{ item.icon|default:"▢" }}</span>
              <span class="vh-sb__label">{{ item.label }}</span>
              {% if item.badge %}
                <span class="vh-sb__badge {% if item.badge == 'dot' %}vh-sb__badge--dot{% endif %}">
                  {{ item.badge }}
                </span>
              {% endif %}
            </a>
          {% endif %}
        {% endfor %}
      {% endwith %}
    {% else %}
      <div class="vh-sb__item is-active">
        <span class="vh-sb__icon">▣</span>
        <span class="vh-sb__label">计划首页</span>
      </div>
    {% endif %}
  </nav>

  <div class="vh-sb__bottom">
    <div class="vh-sb__mini">帮助</div>
    <div class="vh-sb__mini">设置</div>
    <div class="vh-sb__mini">反馈</div>
  </div>
</aside>
