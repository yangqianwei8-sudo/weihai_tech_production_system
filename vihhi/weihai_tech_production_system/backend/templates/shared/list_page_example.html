{# 
{% extends "shared/list_page_base.html" %}
  åˆ—è¡¨é¡µæ¨¡æ¿ä½¿ç”¨ç¤ºä¾‹
  è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ list_page_base.html
#}
{% extends "shared/list_page_base.html" %}
{% load static %}

{% block list_page_title %}å®¢æˆ·åˆ—è¡¨{% endblock %}
{% block list_page_subtitle_content %}æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å®¢æˆ·ä¿¡æ¯{% endblock %}

{% block list_page_actions %}
  <a href="{% url 'customer_create' %}" class="list-btn list-btn-primary">åˆ›å»ºå®¢æˆ·</a>
  <a href="{% url 'customer_export' %}" class="list-btn list-btn-outline">å¯¼å‡º</a>
{% endblock %}

{% block list_stats_content %}
  <div class="row g-3">
    <div class="col-md-3">
      <div class="list-stat-card">
        <div class="list-stat-label">å®¢æˆ·æ€»æ•°</div>
        <div class="list-stat-value">{{ total_count|default:0 }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="list-stat-card">
        <div class="list-stat-label">æ´»è·ƒå®¢æˆ·</div>
        <div class="list-stat-value">{{ active_count|default:0 }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="list-stat-card">
        <div class="list-stat-label">æœ¬æœˆæ–°å¢</div>
        <div class="list-stat-value">{{ month_new_count|default:0 }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="list-stat-card">
        <div class="list-stat-label">å¾…è·Ÿè¿›</div>
        <div class="list-stat-value">{{ follow_up_count|default:0 }}</div>
      </div>
    </div>
  </div>
{% endblock %}

{% block list_filters_content %}
  <div class="col-md-3">
    <label class="form-label">å®¢æˆ·åç§°</label>
    <input type="text" name="name" class="form-control" value="{{ request.GET.name }}" placeholder="è¯·è¾“å…¥å®¢æˆ·åç§°">
  </div>
  <div class="col-md-3">
    <label class="form-label">çŠ¶æ€</label>
    <select name="status" class="form-select">
      <option value="">å…¨éƒ¨çŠ¶æ€</option>
      {% for value, label in status_choices %}
      <option value="{{ value }}" {% if request.GET.status == value|stringformat:"s" %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3">
    <label class="form-label">åˆ›å»ºæ—¶é—´</label>
    <input type="date" name="created_date" class="form-control" value="{{ request.GET.created_date }}">
  </div>
{% endblock %}

{% block list_table_headers %}
  <th>å®¢æˆ·åç§°</th>
  <th>è”ç³»äºº</th>
  <th>ç”µè¯</th>
  <th>é‚®ç®±</th>
  <th>çŠ¶æ€</th>
  <th>åˆ›å»ºæ—¶é—´</th>
  <th>æ“ä½œ</th>
{% endblock %}

{% block list_table_rows %}
  {% for customer in page_obj %}
  <tr>
    <td><strong>{{ customer.name }}</strong></td>
    <td>{{ customer.contact_name|default:"-" }}</td>
    <td>{{ customer.phone|default:"-" }}</td>
    <td>{{ customer.email|default:"-" }}</td>
    <td>
      <span class="badge bg-secondary">{{ customer.get_status_display }}</span>
    </td>
    <td>{{ customer.created_at|date:"Y-m-d H:i" }}</td>
    <td>
      <div class="btn-group btn-group-sm">
        <a href="{% url 'customer_detail' customer.id %}" class="btn btn-outline-primary" title="æŸ¥çœ‹">
          <i class="bi bi-eye"></i>
        </a>
        <a href="{% url 'customer_edit' customer.id %}" class="btn btn-outline-secondary" title="ç¼–è¾‘">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{% url 'customer_delete' customer.id %}" class="btn btn-outline-danger" title="åˆ é™¤" onclick="return confirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ')">
          <i class="bi bi-trash"></i>
        </a>
      </div>
    </td>
  </tr>
  {% empty %}
  <tr>
    <td colspan="7" class="list-empty-state">
      <div class="list-empty-state-icon">ğŸ“‹</div>
      <div class="list-empty-state-text">æš‚æ— å®¢æˆ·æ•°æ®</div>
      <div class="list-empty-state-hint">è¯·åˆ›å»ºç¬¬ä¸€æ¡å®¢æˆ·è®°å½•å¼€å§‹ä½¿ç”¨</div>
    </td>
  </tr>
  {% endfor %}
{% endblock %}
