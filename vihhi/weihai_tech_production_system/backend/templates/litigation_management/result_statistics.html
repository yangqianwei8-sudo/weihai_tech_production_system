{% extends "litigation_management/base.html" %}
{% load static %}

{% block title %}ç»“æœç»Ÿè®¡ - è¯‰è®¼ç®¡ç†{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'litigation_pages:litigation_home' %}">è¯‰è®¼ç®¡ç†</a></li>
<li class="breadcrumb-item active" aria-current="page">ç»“æœç»Ÿè®¡</li>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">{{ page_title }}</h2>
            <p class="text-muted mb-0">{{ description }}</p>
        </div>
        <div>
            <a href="{% url 'litigation_pages:litigation_home' %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> è¿”å›é¦–é¡µ
            </a>
        </div>
    </div>

    {% if summary_cards %}
    <div class="info-card info-card-elevated mb-4">
        <div class="info-card-header">
            <h5 class="info-card-title">ğŸ“Š ç»“æœç»Ÿè®¡æ¦‚è§ˆ</h5>
        </div>
        <div class="info-card-body">
            <div class="info-grid info-grid-4 info-grid-responsive">
                {% for card in summary_cards %}
                <div class="info-item">
                    <span class="info-label">{{ card.label }}</span>
                    <span class="info-value info-value-large">{{ card.value }}</span>
                    {% if card.hint %}
                    <span class="info-hint">{{ card.hint }}</span>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <div class="info-card mb-4">
        <div class="info-card-header">
            <h5 class="info-card-title">ç»Ÿè®¡ç­›é€‰</h5>
        </div>
        <div class="info-card-body">
            <form method="get" class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">å¼€å§‹æ—¥æœŸ</label>
                    <input type="date" name="date_from" class="form-control form-control-sm" value="{{ date_from }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">ç»“æŸæ—¥æœŸ</label>
                    <input type="date" name="date_to" class="form-control form-control-sm" value="{{ date_to }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">&nbsp;</label>
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary btn-sm">
                            <i class="bi bi-search"></i> æŸ¥è¯¢
                        </button>
                        <a href="{% url 'litigation_pages:result_statistics' %}" class="btn btn-secondary btn-sm">
                            <i class="bi bi-arrow-counterclockwise"></i> é‡ç½®
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="info-card mb-4">
        <div class="info-card-header">
            <h5 class="info-card-title">è¯‰è®¼ç»“æœç»Ÿè®¡</h5>
        </div>
        <div class="info-card-body">
            <div class="info-grid info-grid-4 info-grid-responsive">
                <div class="info-item">
                    <span class="info-label">èƒœè¯‰æ¡ˆä»¶</span>
                    <span class="info-value info-value-large">{{ won_cases }}</span>
                    <span class="info-hint">èƒœè¯‰é‡‘é¢ï¼šÂ¥{{ won_amount|floatformat:2 }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">è´¥è¯‰æ¡ˆä»¶</span>
                    <span class="info-value info-value-large">{{ lost_cases }}</span>
                    <span class="info-hint">è´¥è¯‰é‡‘é¢ï¼šÂ¥{{ lost_amount|floatformat:2 }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">å’Œè§£æ¡ˆä»¶</span>
                    <span class="info-value info-value-large">{{ settled_cases }}</span>
                    <span class="info-hint">å’Œè§£é‡‘é¢ï¼šÂ¥{{ settled_amount|floatformat:2 }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">æ’¤è¯‰æ¡ˆä»¶</span>
                    <span class="info-value info-value-large">{{ withdrawn_cases }}</span>
                    <span class="info-hint">æ’¤è¯‰é‡‘é¢ï¼šÂ¥{{ withdrawn_amount|floatformat:2 }}</span>
                </div>
            </div>
        </div>
    </div>

    {% if avg_won_cycle %}
    <div class="info-card mb-4">
        <div class="info-card-header">
            <h5 class="info-card-title">å‘¨æœŸç»Ÿè®¡</h5>
        </div>
        <div class="info-card-body">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">èƒœè¯‰æ¡ˆä»¶å¹³å‡å‘¨æœŸ</span>
                    <span class="info-value info-value-large">{{ avg_won_cycle|floatformat:0 }} å¤©</span>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
