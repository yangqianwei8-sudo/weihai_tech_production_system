{% extends "admin/base.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url 'admin:workflow_engine_approvalinstance_changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<div style="margin: 20px 0; padding: 20px; background: #f5f5f5; border-radius: 8px;">
    <h2>审批实例信息</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 8px; font-weight: bold; width: 150px;">审批编号：</td>
            <td style="padding: 8px;">{{ instance.instance_number }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; font-weight: bold;">流程名称：</td>
            <td style="padding: 8px;">{{ instance.workflow.name }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; font-weight: bold;">申请人：</td>
            <td style="padding: 8px;">{{ instance.applicant.username }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; font-weight: bold;">当前节点：</td>
            <td style="padding: 8px;">{{ instance.current_node.name|default:"-" }}</td>
        </tr>
        {% if instance.apply_comment %}
        <tr>
            <td style="padding: 8px; font-weight: bold;">申请说明：</td>
            <td style="padding: 8px;">{{ instance.apply_comment }}</td>
        </tr>
        {% endif %}
    </table>
</div>

<form method="post" style="margin-top: 20px;">
    {% csrf_token %}
    <div style="margin-bottom: 20px;">
        <label for="comment" style="display: block; margin-bottom: 8px; font-weight: bold;">审批意见：</label>
        <textarea name="comment" id="comment" rows="4" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" placeholder="请输入审批意见（可选）"></textarea>
    </div>
    
    <div style="margin-top: 20px;">
        <button type="submit" style="background: #4caf50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">确认通过</button>
        <a href="{% url 'admin:workflow_engine_approvalinstance_changelist' %}" style="margin-left: 10px; padding: 10px 20px; background: #9e9e9e; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">取消</a>
    </div>
</form>
{% endblock %}
