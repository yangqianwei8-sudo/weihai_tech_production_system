{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
  {{ block.super }}
  <style>
    
    
    /* å­¦æ ¡ç®¡ç†é¡µé¢æ ·å¼ */
    .school-admin-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 30px;
      margin: -10px -20px 20px -20px;
      border-radius: 8px 8px 0 0;
    }
    
    .school-admin-header h1 {
      color: white;
      margin: 0 0 10px 0;
      font-size: 24px;
      font-weight: 600;
    }
    
    /* ä¼˜åŒ–è¡¨æ ¼æ ·å¼ */
    #result_list {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      background: white;
    }
    
    #result_list thead {
      background: #667eea;
      color: white;
    }
    
    #result_list thead th {
      padding: 12px 15px;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 0.5px;
      border-bottom: none;
    }
    
    #result_list tbody tr {
      transition: background-color 0.2s;
      border-bottom: 1px solid #e9ecef;
    }
    
    #result_list tbody tr:hover {
      background-color: #f8f9fa;
    }
    
    #result_list tbody tr:last-child {
      border-bottom: none;
    }
    
    #result_list tbody td {
      padding: 12px 15px;
      vertical-align: middle;
    }
    
    /* æ ‡ç­¾æ ·å¼ä¼˜åŒ– */
    .school-tags {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
    }
    
    .tag-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .tag-badge.tag-985 {
      background: #fff3cd;
      color: #856404;
    }
    
    .tag-badge.tag-211 {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    .tag-badge.tag-double-first-class {
      background: #f8d7da;
      color: #721c24;
    }
    
    /* æœç´¢æ¡†ä¼˜åŒ– */
    #changelist-search {
      padding: 15px;
      background: white;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    #searchbar {
      width: 100%;
      padding: 10px 15px;
      border: 2px solid #e9ecef;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s;
    }
    
    #searchbar:focus {
      outline: none;
      border-color: #667eea;
    }
    
    /* ç­›é€‰å™¨ä¼˜åŒ– */
    #changelist-filter {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
  </style>
{% endblock %}

{% block content_title %}
  <div class="school-admin-header">
    <h1>ğŸ« å­¦æ ¡ç®¡ç†</h1>
    <p style="margin: 0; opacity: 0.9;">ç®¡ç†é«˜æ ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬985ã€211ã€åŒä¸€æµç­‰æ ‡ç­¾</p>
  </div>
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <script>
    (function() {
      'use strict';
      
      // é¡µé¢åŠ è½½å®Œæˆåä¼˜åŒ–æ ‡ç­¾æ˜¾ç¤º
      function initPage() {
        optimizeTags();
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPage);
      } else {
        initPage();
      }
      
      function optimizeTags() {
        const tagCells = document.querySelectorAll('#result_list td.field-get_tags_display');
        tagCells.forEach(function(cell) {
          const tagsText = cell.textContent.trim();
          if (tagsText) {
            const tags = tagsText.split(',').map(function(t) { 
              return t.trim(); 
            }).filter(function(t) { 
              return t && t !== 'â€”' && t !== '-'; 
            });
            
            if (tags.length > 0) {
              cell.innerHTML = '<div class="school-tags">' + 
                tags.map(function(tag) {
                  let className = 'tag-badge';
                  if (tag.includes('985')) {
                    className += ' tag-985';
                  } else if (tag.includes('211')) {
                    className += ' tag-211';
                  } else if (tag.includes('åŒä¸€æµ')) {
                    className += ' tag-double-first-class';
                  }
                  return '<span class="' + className + '">' + tag + '</span>';
                }).join('') +
                '</div>';
            }
          }
        });
      }
    })();
  </script>
{% endblock %}
