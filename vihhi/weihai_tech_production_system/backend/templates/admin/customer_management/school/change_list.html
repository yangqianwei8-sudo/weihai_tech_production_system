{% extends "shared/list_page_base.html" %}
{% load static %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
  {{ block.super }}
  
{% endblock %}

{% block content_title %}
  <div class="school-admin-header">
    <h1>ğŸ« å­¦æ ¡ç®¡ç†</h1>
    <p style="margin: 0; opacity: 0.9;">ç®¡ç†é«˜æ ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬985ã€211ã€åŒä¸€æµç­‰æ ‡ç­¾</p>
  </div>
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <script>
    (function() {
      'use strict';

      // é¡µé¢åŠ è½½å®Œæˆåä¼˜åŒ–æ ‡ç­¾æ˜¾ç¤º
      function initPage() {
        optimizeTags();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPage);
      } else {
        initPage();
      }

      function optimizeTags() {
        const tagCells = document.querySelectorAll('#result_list td.field-get_tags_display');
        tagCells.forEach(function(cell) {
          const tagsText = cell.textContent.trim();
          if (tagsText) {
            const tags = tagsText.split(',').map(function(t) {
              return t.trim();
            }).filter(function(t) {
              return t && t !== 'â€”' && t !== '-';
            });

            if (tags.length > 0) {
              cell.innerHTML = '<div class="school-tags">' +
                tags.map(function(tag) {
                  let className = 'tag-badge';
                  if (tag.includes('985')) {
                    className += ' tag-985';
                  } else if (tag.includes('211')) {
                    className += ' tag-211';
                  } else if (tag.includes('åŒä¸€æµ')) {
                    className += ' tag-double-first-class';
                  }
                  return '<span class="' + className + '">' + tag + '</span>';
                }).join('') +
                '</div>';
            }
          }
        });
      }
    })();
  </script>
{% endblock %}
