{% extends "admin/base.html" %}
{% load i18n static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">{{ site_header|default:_('Django administration') }}</a></h1>
{% if user.is_anonymous %}
  {% include "admin/color_theme_toggle.html" %}
{% endif %}
{% endblock %}

{% block nav-global %}
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
        /* é™åˆ¶å·¦ä¾§å¯¼èˆªæ é«˜åº¦ï¼Œå¯ç”¨æ»šåŠ¨ */
    #nav-sidebar {
        max-height: calc(100vh - 120px) !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
    }

    /* ä¼˜åŒ–æ»šåŠ¨æ¡æ ·å¼ */
    #nav-sidebar::-webkit-scrollbar {
        width: 6px;
    }

    #nav-sidebar::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
    }

    #nav-sidebar::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.3);
        border-radius: 3px;
    }

    #nav-sidebar::-webkit-scrollbar-thumb:hover {
        background: rgba(255,255,255,0.5);
    }

    /* é»˜è®¤æŠ˜å ï¼šéšè—æ‰€æœ‰åº”ç”¨ä¸‹çš„æ¨¡å‹è¡Œ */
    #nav-sidebar .module table tbody tr[class*="model-"] {
        display: none !important;
    }

    /* é¼ æ ‡æ‚¬åœåœ¨åº”ç”¨æ¨¡å—ä¸Šæ—¶å±•å¼€æ˜¾ç¤ºæ¨¡å‹ */
    #nav-sidebar .module:hover table tbody tr[class*="model-"] {
        display: table-row !important;
    }

    /* éšè—è¡¨å¤´è¡Œï¼ˆtheadï¼‰ï¼Œé¿å…ç©ºç™½è¡Œ */
    #nav-sidebar .module table thead {
        display: none !important;
    }

    /* éšè—ç©ºçš„tbodyï¼ˆå¦‚æœå­˜åœ¨ï¼‰ */
    #nav-sidebar .module table tbody:empty {
        display: none !important;
    }

    /* å‡å°‘åº”ç”¨æ¨¡å—ä¹‹é—´çš„é—´è· */
    #nav-sidebar .module {
        margin-bottom: 0 !important;
    }

    #nav-sidebar .module table {
        margin-bottom: 0 !important;
    }

    /* ç¡®ä¿è¿‡æ»¤å™¨å®¹å™¨åœ¨å³ä¾§æ˜¾ç¤º */
    #changelist .changelist-form-container {
        display: flex !important;
        flex-wrap: nowrap !important;
        align-items: flex-start !important;
    }

    /* è¿‡æ»¤å™¨å®¹å™¨æ ·å¼ */
    #changelist .filter-container {
        flex: 0 0 240px !important;
        order: 2 !important;  /* ç§»åˆ°å³ä¾§ï¼ˆåœ¨formä¹‹åï¼‰ */
        margin-left: 30px !important;
    }

    /* è¡¨å•å®¹å™¨å æ®å‰©ä½™ç©ºé—´ */
    #changelist .changelist-form-container > div:not(.filter-container) {
        flex: 1 1 auto !important;
        order: 1 !important;
        min-width: 0;
    }

    /* è¿‡æ»¤å™¨æ ·å¼ */
    #changelist-filter {
        position: sticky !important;
        top: 60px !important;
        max-height: calc(100vh - 120px) !important;
        overflow-y: auto !important;
    }
        /* åˆ—è¡¨è¡¨æ ¼æ ·å¼ï¼šå›ºå®šæ€»å®½åº¦ï¼Œé“ºæ»¡ä¸­é—´åŒºåŸŸï¼Œå¹³å‡åˆ†å¸ƒåˆ—å®½ */
    #changelist .results {
        width: 100% !important;
        overflow-x: auto !important;
        max-width: 100% !important;
    }

    #changelist .results table {
        width: 100% !important;
        table-layout: fixed !important;
        border-collapse: collapse !important;
    }

    /* å¹³å‡åˆ†å¸ƒæ‰€æœ‰åˆ—å®½åº¦ */
    #changelist .results table thead th,
    #changelist .results table tbody td {
        width: auto !important;
    }

    /* ç¡®ä¿è¡¨æ ¼é“ºæ»¡å®¹å™¨ */
    #changelist .results table colgroup col {
        width: auto !important;
    }

    /* ç§»é™¤Djangoé»˜è®¤çš„åˆ—å®½é™åˆ¶ */
    #changelist .results table th.action-checkbox-column,
    #changelist .results table td.action-checkbox {
        width: auto !important;
    }

</style>
{% endblock %}

{% block extrahead %}
  <script>
    // ğŸ”´ ç¡¬ç¦ç”¨ä¸šåŠ¡å‰ç«¯ç³»ç»Ÿ
  <script>
    // ğŸ”´ ç¡¬ç¦ç”¨ä¸šåŠ¡å‰ç«¯ç³»ç»Ÿ
    window.__DISABLE_BUSINESS_APP__ = true;
    
    // ğŸ”´ å¼ºåˆ¶ç§»é™¤ä¸šåŠ¡ç³»ç»Ÿçš„ navbarï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    (function removeBusinessNavbar() {
        function removeNavbar() {
            // æŸ¥æ‰¾æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„ navbarï¼ˆæ’é™¤ Django admin çš„ #headerï¼‰
            const navbars = document.querySelectorAll("nav.navbar, .navbar");
            navbars.forEach(function(navbar) {
                // æ’é™¤ Django admin çš„ #header
                if (navbar.id !== "header" && !navbar.closest("#header")) {
                    navbar.remove();
                }
            });
        }
        
        // ç«‹å³æ‰§è¡Œ
        removeNavbar();
        
        // DOM åŠ è½½å®Œæˆåå†æ¬¡æ‰§è¡Œ
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", removeNavbar);
        } else {
            removeNavbar();
        }
        
        // å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰è„šæœ¬æ‰§è¡Œå®Œæ¯•
        setTimeout(removeNavbar, 100);
        setTimeout(removeNavbar, 500);
        setTimeout(removeNavbar, 1000);
        
        // ç›‘å¬ DOM å˜åŒ–ï¼Œç¡®ä¿ navbar ä¸ä¼šè¢«é‡æ–°æ·»åŠ 
        if (typeof MutationObserver !== "undefined") {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) {
                            if (node.classList && (node.classList.contains("navbar") || node.tagName === "NAV")) {
                                if (node.id !== "header" && !node.closest("#header")) {
                                    node.remove();
                                }
                            }
                            if (node.querySelector) {
                                const navbar = node.querySelector(".navbar, nav.navbar");
                                if (navbar && navbar.id !== "header" && !navbar.closest("#header")) {
                                    navbar.remove();
                                }
                            }
                        }
                    });
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
    })();
  </script>
  <script>
    // ğŸ”´ ç¡¬ç¦ç”¨ä¸šåŠ¡å‰ç«¯ç³»ç»Ÿ
    window.__DISABLE_BUSINESS_APP__ = true;
    
    // ğŸ”´ å¼ºåˆ¶ç§»é™¤ä¸šåŠ¡ç³»ç»Ÿçš„ navbarï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    (function removeBusinessNavbar() {
        function removeNavbar() {
            // æŸ¥æ‰¾æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„ navbarï¼ˆæ’é™¤ Django admin çš„ #headerï¼‰
            const navbars = document.querySelectorAll("nav.navbar, .navbar");
            navbars.forEach(function(navbar) {
                // æ’é™¤ Django admin çš„ #header
                if (navbar.id !== "header" && !navbar.closest("#header")) {
                    navbar.remove();
                }
            });
        }
        
        // ç«‹å³æ‰§è¡Œ
        removeNavbar();
        
        // DOM åŠ è½½å®Œæˆåå†æ¬¡æ‰§è¡Œ
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", removeNavbar);
        } else {
            removeNavbar();
        }
        
        // å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰è„šæœ¬æ‰§è¡Œå®Œæ¯•
        setTimeout(removeNavbar, 100);
        setTimeout(removeNavbar, 500);
        setTimeout(removeNavbar, 1000);
        
        // ç›‘å¬ DOM å˜åŒ–ï¼Œç¡®ä¿ navbar ä¸ä¼šè¢«é‡æ–°æ·»åŠ 
        if (typeof MutationObserver !== "undefined") {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) {
                            if (node.classList && (node.classList.contains("navbar") || node.tagName === "NAV")) {
                                if (node.id !== "header" && !node.closest("#header")) {
                                    node.remove();
                                }
                            }
                            if (node.querySelector) {
                                const navbar = node.querySelector(".navbar, nav.navbar");
                                if (navbar && navbar.id !== "header" && !navbar.closest("#header")) {
                                    navbar.remove();
                                }
                            }
                        }
                    });
                });
            });
            
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
    })();
  </script>

</script>
{% endblock %}
