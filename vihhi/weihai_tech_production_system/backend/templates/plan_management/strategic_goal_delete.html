{% extends "plan_management/base.html" %}
{% load static %}

{% block title %}{{ page_title }} - 维海科技信息化管理平台{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/common.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="card shadow-sm border-danger">
        <div class="card-header bg-danger text-white">
            <h4 class="mb-0">{{ page_title }}</h4>
        </div>
        <div class="card-body">
            {% if not can_delete %}
            <div class="alert alert-danger">
                <i class="bi bi-exclamation-circle me-2"></i>
                <strong>无法删除：</strong>
                <ul class="mb-0 mt-2">
                    {% for warning in delete_warnings %}
                    <li>{{ warning }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% else %}
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle me-2"></i>
                <strong>警告：</strong>删除操作不可恢复，请确认您要删除以下战略目标：
            </div>
            {% endif %}
            
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">{{ goal.name }}</h5>
                    <p class="card-text">
                        <strong>目标编号：</strong>{{ goal.goal_number }}<br>
                        <strong>目标类型：</strong>{{ goal.get_goal_type_display }}<br>
                        <strong>目标周期：</strong>{{ goal.get_goal_period_display }}<br>
                        <strong>目标状态：</strong>{{ goal.get_status_display }}<br>
                        <strong>负责人：</strong>{{ goal.responsible_person.get_full_name|default:goal.responsible_person.username }}
                    </p>
                </div>
            </div>
            
            <form method="post">
                {% csrf_token %}
                <div class="d-flex justify-content-end gap-2">
                    <a href="{% url 'plan_pages:strategic_goal_detail' goal.id %}" class="btn btn-secondary">
                        <i class="bi bi-x-circle me-1"></i>取消
                    </a>
                    {% if can_delete %}
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash me-1"></i>确认删除
                    </button>
                    {% else %}
                    <button type="button" class="btn btn-danger" disabled>
                        <i class="bi bi-trash me-1"></i>无法删除
                    </button>
                    {% endif %}
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

