<div class="list-filters">
  <form method="get" class="list-filters-form">
    <div class="list-filter-group">
      <label class="list-filter-label">搜索</label>
      <input type="text" name="search" class="list-filter-input"
             value="{{ search }}" placeholder="计划编号、名称、负责人">
    </div>
    <div class="list-filter-group">
      <label class="list-filter-label">状态</label>
      <select name="status" class="list-filter-input">
        <option value="">全部状态</option>
        {% for value, label in status_options %}
        <option value="{{ value }}" {% if status_filter == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="list-filter-group">
      <label class="list-filter-label">计划类型</label>
      <select name="plan_type" class="list-filter-input">
        <option value="">全部类型</option>
        <option value="personal" {% if plan_type_filter == 'personal' %}selected{% endif %}>个人计划</option>
        <option value="department" {% if plan_type_filter == 'department' %}selected{% endif %}>部门计划</option>
        <option value="company" {% if plan_type_filter == 'company' %}selected{% endif %}>公司计划</option>
        <option value="project" {% if plan_type_filter == 'project' %}selected{% endif %}>项目计划</option>
      </select>
    </div>
    <div class="list-filter-group">
      <label class="list-filter-label">计划周期</label>
      <select name="plan_period" class="list-filter-input">
        <option value="">全部周期</option>
        <option value="daily" {% if plan_period_filter == 'daily' %}selected{% endif %}>日计划</option>
        <option value="weekly" {% if plan_period_filter == 'weekly' %}selected{% endif %}>周计划</option>
        <option value="monthly" {% if plan_period_filter == 'monthly' %}selected{% endif %}>月计划</option>
        <option value="quarterly" {% if plan_period_filter == 'quarterly' %}selected{% endif %}>季度计划</option>
        <option value="yearly" {% if plan_period_filter == 'yearly' %}selected{% endif %}>年计划</option>
      </select>
    </div>
    <div class="list-filter-group">
      <label class="list-filter-label">负责人</label>
      <select name="responsible_person" class="list-filter-input">
        <option value="">全部负责人</option>
        {% for u in responsible_options %}
        <option value="{{ u.id }}" {% if responsible_filter|stringformat:"s" == u.id|stringformat:"s" %}selected{% endif %}>
          {{ u.get_full_name|default:u.username }}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="list-filter-group">
      <label class="list-filter-label">关联目标</label>
      <select name="related_goal" class="list-filter-input">
        <option value="">全部目标</option>
        {% for goal in all_goals %}
        <option value="{{ goal.id }}" {% if related_goal_filter|stringformat:"s" == goal.id|stringformat:"s" %}selected{% endif %}>
          {{ goal.name|truncatewords:5 }}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="list-filter-actions">
      <button type="submit" class="list-btn list-btn-primary">筛选</button>
      <a href="{% url 'plan_pages:plan_list' %}" class="list-btn">重置</a>
    </div>
  </form>
</div>
