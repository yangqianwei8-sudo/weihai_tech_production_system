{% extends "shared/module_home_base.html" %}
{% load static %}

{% block module_styles %}
  {{ block.super }}
{% endblock module_styles %}

{% block module_home_core_cards %}
  <!-- æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ -->
  {% if core_cards %}
  <div class="module-home-core-cards">
    {% for card in core_cards %}
    <a href="{{ card.url|default:'#' }}" class="module-home-core-card">
      <div class="module-home-core-card-icon">{{ card.icon|default:'ðŸ“Š' }}</div>
      <div class="module-home-core-card-label">{{ card.label }}</div>
      <div class="module-home-core-card-value">{{ card.value }}</div>
      {% if card.subvalue %}
      <div class="module-home-core-card-subvalue">{{ card.subvalue }}</div>
      {% endif %}
    </a>
    {% endfor %}
  </div>
  {% endif %}
{% endblock module_home_core_cards %}

{% block module_home_stats_row %}
{% endblock module_home_stats_row %}

{% block module_home_warning_todo_row %}
  <!-- å¾…åŠžäº‹é¡¹ -->
  <div class="module-home-stats-row">
    {% if todo_items %}
    <div class="module-home-todo-card">
      <div class="module-home-card-title">
        å¾…æˆ‘å®¡æ‰¹
        {% if pending_approval_count %}
        <span style="font-size: 12px; font-weight: 400; color: #666;">({{ pending_approval_count }})</span>
        {% endif %}
      </div>
      <ul class="module-home-todo-list">
        {% for item in todo_items %}
        <li class="module-home-todo-item">
          <a href="{{ item.url|default:'#' }}" class="module-home-item-link">
            <div class="module-home-item-title">{{ item.title }}</div>
            <div class="module-home-item-meta">
              {{ item.instance_number|default:'' }} Â· {{ item.time|date:"Y-m-d H:i" }}
            </div>
          </a>
        </li>
        {% endfor %}
      </ul>
      {% if pending_approval_count > 5 %}
      <div style="text-align: center; margin-top: 12px;">
        <a href="{% url 'workflow_engine:approval_list' %}?status=pending" style="font-size: 12px; color: #666;">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
      </div>
      {% endif %}
    </div>
    {% else %}
    <div class="module-home-todo-card">
      <div class="module-home-card-title">å¾…æˆ‘å®¡æ‰¹</div>
      <div class="module-home-empty">æš‚æ— å¾…å®¡æ‰¹äº‹é¡¹</div>
    </div>
    {% endif %}
    
    {% if my_pending_items %}
    <div class="module-home-todo-card">
      <div class="module-home-card-title">
        æˆ‘çš„ç”³è¯·
        {% if my_pending_count %}
        <span style="font-size: 12px; font-weight: 400; color: #666;">({{ my_pending_count }})</span>
        {% endif %}
      </div>
      <ul class="module-home-todo-list">
        {% for item in my_pending_items %}
        <li class="module-home-todo-item">
          <a href="{{ item.url|default:'#' }}" class="module-home-item-link">
            <div class="module-home-item-title">{{ item.title }}</div>
            <div class="module-home-item-meta">
              {{ item.instance_number|default:'' }} Â· {{ item.status|default:'' }} Â· {{ item.time|date:"Y-m-d H:i" }}
            </div>
          </a>
        </li>
        {% endfor %}
      </ul>
      {% if my_pending_count > 5 %}
      <div style="text-align: center; margin-top: 12px;">
        <a href="{% url 'workflow_engine:approval_list' %}?status=my" style="font-size: 12px; color: #666;">æŸ¥çœ‹å…¨éƒ¨ â†’</a>
      </div>
      {% endif %}
    </div>
    {% else %}
    <div class="module-home-todo-card">
      <div class="module-home-card-title">æˆ‘çš„ç”³è¯·</div>
      <div class="module-home-empty">æš‚æ— ç”³è¯·è®°å½•</div>
    </div>
    {% endif %}
  </div>
{% endblock module_home_warning_todo_row %}

{% block module_home_work_activities_row %}
{% endblock module_home_work_activities_row %}

{% block module_home_scripts %}
  {{ block.super }}
{% endblock module_home_scripts %}
