{% extends "shared/module_base.html" %}
{% block pm_title %}专业分类管理{% endblock %}

{% block pm_actions %}<a class="btn btn-primary" href="{% url 'resource_standard:professional_category_create' %}">新增专业</a>{% endblock %}

{% block pm_content %}
<div class="container-fluid">

    </div>

    {% if messages %}
    <div class="mb-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="card">
        <table class="table mb-0">
            <thead>
                <tr>
                    <th>代码</th>
                    <th>名称</th>
                    <th>类别</th>
                    <th>适用服务类型</th>
                    <th>默认负责人</th>
                    <th>工作流模板</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for item in categories %}
                <tr>
                    <td>{{ item.code }}</td>
                    <td>{{ item.name }}</td>
                    <td>{{ item.get_category_display }}</td>
                    <td>
                        {% for svc in item.service_types %}
                            <span class="badge bg-info-subtle text-info-emphasis me-1">{{ svc }}</span>
                        {% empty %}
                            <span class="text-muted">—</span>
                        {% endfor %}
                    </td>
                    <td>{{ item.default_owner.get_full_name|default:item.default_owner.username|default:"—" }}</td>
                    <td>{{ item.workflow_template|default:"—" }}</td>
                    <td>
                        <a class="btn btn-sm btn-outline-primary" href="{% url 'resource_standard:professional_category_edit' item.pk %}">编辑</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center text-muted py-4">暂无专业分类</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}