{% extends "customer_management/_base.html" %}
{% load static %}

{% block cm_title %}商机列表{% endblock %}
{% block cm_subtitle %}<span class="pm-subtitle">查看和管理所有商机</span>{% endblock %}

{% block cm_actions %}
{% if can_create %}
<a href="{% url 'opportunity_pages:opportunity_create' %}" class="list-btn list-btn-primary">
  创建商机
</a>
<a href="{% url 'opportunity_pages:opportunity_import' %}" class="list-btn list-btn-secondary">
  批量导入
</a>
{% endif %}
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/components/list_layout.css' %}">
<style>
  /* 商机状态badge样式 */
  .list-badge-potential { background: #E8E8E8; color: #333333; border-color: #CCCCCC; }
  .list-badge-initial_contact { background: #E8E8E8; color: #333333; border-color: #CCCCCC; }
  .list-badge-requirement_confirmed { background: #E8E8E8; color: #333333; border-color: #CCCCCC; }
  .list-badge-quotation { background: #E8E8E8; color: #333333; border-color: #CCCCCC; }
  .list-badge-negotiation { background: #E8E8E8; color: #333333; border-color: #CCCCCC; }
  .list-badge-won { background: #E8E8E8; color: #1A1A1A; border-color: #CCCCCC; }
  .list-badge-lost { background: #F5F5F5; color: #999999; border-color: #E0E0E0; }
  .list-badge-cancelled { background: #F5F5F5; color: #999999; border-color: #E0E0E0; }
</style>
{% endblock %}

{% block cm_content %}
  {% include "customer_management/_partials/_opportunity_stats.html" %}
  {% include "customer_management/_partials/_opportunity_filters.html" %}
  {% include "customer_management/_partials/_opportunity_table.html" %}
{% endblock %}
