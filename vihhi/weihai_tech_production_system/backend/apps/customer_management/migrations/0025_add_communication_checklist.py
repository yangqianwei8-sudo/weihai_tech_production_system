# Generated by Django 4.2.7 on 2025-12-03 07:48

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('customer_management', '0024_customerrelationship_location_address_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='CustomerCommunicationChecklist',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('checklist_number', models.CharField(blank=True, help_text='自动生成：GT-YYYYMMDD-0000', max_length=50, null=True, unique=True, verbose_name='清单编号')),
                ('title', models.CharField(max_length=200, verbose_name='沟通主题')),
                ('communication_date', models.DateTimeField(verbose_name='计划沟通时间')),
                ('location', models.CharField(blank=True, max_length=200, verbose_name='沟通地点')),
                ('status', models.CharField(choices=[('before', '沟通前'), ('after', '沟通后'), ('completed', '已完成')], default='before', max_length=20, verbose_name='状态')),
                ('part1_q1_client_info', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.1 是否明确客户全称及企业类型')),
                ('part1_q1_note_before', models.TextField(blank=True, verbose_name='1.1 沟通前说明')),
                ('part1_q1_note_after', models.TextField(blank=True, verbose_name='1.1 沟通后说明')),
                ('part1_q2_business_model', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.2 是否了解客户的核心商业模式')),
                ('part1_q2_note_before', models.TextField(blank=True, verbose_name='1.2 沟通前说明')),
                ('part1_q2_note_after', models.TextField(blank=True, verbose_name='1.2 沟通后说明')),
                ('part1_q3_design_stage', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.3 是否清楚项目当前具体的设计阶段')),
                ('part1_q3_note_before', models.TextField(blank=True, verbose_name='1.3 沟通前说明')),
                ('part1_q3_note_after', models.TextField(blank=True, verbose_name='1.3 沟通后说明')),
                ('part1_q4_key_nodes', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.4 是否知晓项目是否存在关键节点压力')),
                ('part1_q4_note_before', models.TextField(blank=True, verbose_name='1.4 沟通前说明')),
                ('part1_q4_note_after', models.TextField(blank=True, verbose_name='1.4 沟通后说明')),
                ('part1_q5_design_unit', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.5 是否了解原设计单位及其技术特点')),
                ('part1_q5_note_before', models.TextField(blank=True, verbose_name='1.5 沟通前说明')),
                ('part1_q5_note_after', models.TextField(blank=True, verbose_name='1.5 沟通后说明')),
                ('part1_q6_pain_points', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.6 是否已推测客户可能存在的至少两个核心成本/技术痛点')),
                ('part1_q6_note_before', models.TextField(blank=True, verbose_name='1.6 沟通前说明')),
                ('part1_q6_note_after', models.TextField(blank=True, verbose_name='1.6 沟通后说明')),
                ('part1_q7_decision_makers', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='1.7 是否已初步识别客户内部的决策者、发起者及关键影响者')),
                ('part1_q7_note_before', models.TextField(blank=True, verbose_name='1.7 沟通前说明')),
                ('part1_q7_note_after', models.TextField(blank=True, verbose_name='1.7 沟通后说明')),
                ('part2_q1_core_goal', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.1 是否设定了本次沟通必须达成的唯一核心目标')),
                ('part2_q1_note_before', models.TextField(blank=True, verbose_name='2.1 沟通前说明')),
                ('part2_q1_note_after', models.TextField(blank=True, verbose_name='2.1 沟通后说明')),
                ('part2_q2_secondary_goals', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.2 是否准备了2-3个次要目标')),
                ('part2_q2_note_before', models.TextField(blank=True, verbose_name='2.2 沟通前说明')),
                ('part2_q2_note_after', models.TextField(blank=True, verbose_name='2.2 沟通后说明')),
                ('part2_q3_success_cases', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.3 是否准备了针对客户痛点的相关成功案例')),
                ('part2_q3_note_before', models.TextField(blank=True, verbose_name='2.3 沟通前说明')),
                ('part2_q3_note_after', models.TextField(blank=True, verbose_name='2.3 沟通后说明')),
                ('part2_q4_unique_value', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.4 是否能用一句话清晰阐述我司在此项目上的独特价值')),
                ('part2_q4_note_before', models.TextField(blank=True, verbose_name='2.4 沟通前说明')),
                ('part2_q4_note_after', models.TextField(blank=True, verbose_name='2.4 沟通后说明')),
                ('part2_q5_company_intro', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.5 是否有清晰的5分钟公司业务介绍提纲')),
                ('part2_q5_note_before', models.TextField(blank=True, verbose_name='2.5 沟通前说明')),
                ('part2_q5_note_after', models.TextField(blank=True, verbose_name='2.5 沟通后说明')),
                ('part2_q6_visual_tools', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.6 是否准备了辅助说明的"设计-成本"可视化工具或数据')),
                ('part2_q6_note_before', models.TextField(blank=True, verbose_name='2.6 沟通前说明')),
                ('part2_q6_note_after', models.TextField(blank=True, verbose_name='2.6 沟通后说明')),
                ('part2_q7_technical_specs', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='2.7 是否复习了该项目业态的关键技术规范与经济指标')),
                ('part2_q7_note_before', models.TextField(blank=True, verbose_name='2.7 沟通前说明')),
                ('part2_q7_note_after', models.TextField(blank=True, verbose_name='2.7 沟通后说明')),
                ('part3_q1_opening', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.1 是否设计好了专业开场白')),
                ('part3_q1_note_before', models.TextField(blank=True, verbose_name='3.1 沟通前说明')),
                ('part3_q1_note_after', models.TextField(blank=True, verbose_name='3.1 沟通后说明')),
                ('part3_q2_ice_breaking', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.2 是否了解参会人员背景并准备了破冰方式')),
                ('part3_q2_note_before', models.TextField(blank=True, verbose_name='3.2 沟通前说明')),
                ('part3_q2_note_after', models.TextField(blank=True, verbose_name='3.2 沟通后说明')),
                ('part3_q3_core_questions', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.3 是否列出了至少5个必须提问的核心问题')),
                ('part3_q3_note_before', models.TextField(blank=True, verbose_name='3.3 沟通前说明')),
                ('part3_q3_note_after', models.TextField(blank=True, verbose_name='3.3 沟通后说明')),
                ('part3_q4_follow_up', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.4 是否准备了追问话术以挖掘深层动机')),
                ('part3_q4_note_before', models.TextField(blank=True, verbose_name='3.4 沟通前说明')),
                ('part3_q4_note_after', models.TextField(blank=True, verbose_name='3.4 沟通后说明')),
                ('part3_q5_concerns', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.5 是否预判了客户可能的两个主要顾虑并准备了应对答案')),
                ('part3_q5_note_before', models.TextField(blank=True, verbose_name='3.5 沟通前说明')),
                ('part3_q5_note_after', models.TextField(blank=True, verbose_name='3.5 沟通后说明')),
                ('part3_q6_backup_plan', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.6 是否准备了关键信息无法获取时的备选方案')),
                ('part3_q6_note_before', models.TextField(blank=True, verbose_name='3.6 沟通前说明')),
                ('part3_q6_note_after', models.TextField(blank=True, verbose_name='3.6 沟通后说明')),
                ('part3_q7_action_items', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='3.7 是否明确了沟通后希望双方执行的立即行动项')),
                ('part3_q7_note_before', models.TextField(blank=True, verbose_name='3.7 沟通前说明')),
                ('part3_q7_note_after', models.TextField(blank=True, verbose_name='3.7 沟通后说明')),
                ('part4_q1_logistics', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='4.1 会议时间、地点、链接等后勤细节是否万无一失')),
                ('part4_q1_note_before', models.TextField(blank=True, verbose_name='4.1 沟通前说明')),
                ('part4_q1_note_after', models.TextField(blank=True, verbose_name='4.1 沟通后说明')),
                ('part4_q2_materials', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='4.2 设备、资料、名片等物料是否齐备')),
                ('part4_q2_note_before', models.TextField(blank=True, verbose_name='4.2 沟通前说明')),
                ('part4_q2_note_after', models.TextField(blank=True, verbose_name='4.2 沟通后说明')),
                ('part4_q3_role_division', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='4.3 内部角色分工是否明确')),
                ('part4_q3_note_before', models.TextField(blank=True, verbose_name='4.3 沟通前说明')),
                ('part4_q3_note_after', models.TextField(blank=True, verbose_name='4.3 沟通后说明')),
                ('part4_q4_mindset', models.CharField(choices=[('yes', '是'), ('no', '否'), ('unknown', '不清楚')], default='unknown', max_length=20, verbose_name='4.4 个人心态是否已调整为"协作解决问题"的合作伙伴状态')),
                ('part4_q4_note_before', models.TextField(blank=True, verbose_name='4.4 沟通前说明')),
                ('part4_q4_note_after', models.TextField(blank=True, verbose_name='4.4 沟通后说明')),
                ('part5_key_info_updates', models.TextField(blank=True, help_text='基于上表对比，哪些关键信息发生了更新或修正', verbose_name='核心信息确认与更新')),
                ('part5_priority_requirement', models.TextField(blank=True, help_text='用客户原话或最接近的表述', verbose_name='客户明确表达的、最优先的需求或期望')),
                ('part5_goal_assessment', models.TextField(blank=True, help_text='若未达成，障碍是什么', verbose_name='核心目标与次要目标达成情况')),
                ('part5_next_action_ours', models.TextField(blank=True, help_text='必须包含：任务内容、责任人、截止时间', verbose_name='我方下一步具体行动')),
                ('part5_next_action_client', models.TextField(blank=True, help_text='必须包含：任务内容、责任人、截止时间', verbose_name='客户方下一步具体行动')),
                ('part5_followup_schedule', models.TextField(blank=True, verbose_name='预计的后续跟进节点')),
                ('part5_challenges', models.TextField(blank=True, help_text='需要团队或上级提供何种支持', verbose_name='本次沟通中遇到的最大挑战')),
                ('part5_improvement_suggestions', models.TextField(blank=True, verbose_name='基于本次经验，对沟通准备清单或公司资料有何改进建议')),
                ('created_time', models.DateTimeField(default=django.utils.timezone.now, verbose_name='创建时间')),
                ('updated_time', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='communication_checklists', to='customer_management.client', verbose_name='关联客户')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_communication_checklists', to=settings.AUTH_USER_MODEL, verbose_name='创建人')),
                ('opportunity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='communication_checklists', to='customer_management.businessopportunity', verbose_name='关联商机')),
            ],
            options={
                'verbose_name': '客户沟通准备清单',
                'verbose_name_plural': '客户沟通准备清单',
                'db_table': 'customer_communication_checklist',
                'ordering': ['-communication_date', '-created_time'],
                'indexes': [models.Index(fields=['client', '-communication_date'], name='customer_co_client__d4fab3_idx'), models.Index(fields=['opportunity', '-communication_date'], name='customer_co_opportu_1e8e11_idx'), models.Index(fields=['status', '-communication_date'], name='customer_co_status_b59455_idx'), models.Index(fields=['checklist_number'], name='customer_co_checkli_dd54e8_idx')],
            },
        ),
    ]
