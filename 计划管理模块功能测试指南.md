# 计划管理模块功能测试指南

**测试日期**: 2025-01-14  
**测试范围**: 计划管理模块所有页面和功能

---

## 一、测试前准备

### 1.1 环境检查

- ✅ Django项目配置正确
- ✅ URL路由配置完整（30个路由）
- ✅ 视图函数完整（33个公共视图函数）
- ✅ 模板文件完整（27个模板文件）
- ✅ 静态文件完整（CSS样式文件）

### 1.2 测试账号准备

确保测试账号具有以下权限：
- `plan_management.view` - 查看计划
- `plan_management.create` - 创建计划
- `plan_management.manage_goal` - 管理目标
- `plan_management.view_analysis` - 查看分析报表
- `plan_management.approve` - 审批计划

---

## 二、功能测试清单

### 2.1 计划管理首页

**URL**: `/plan/` 或 `/plan/home/`

**测试步骤**:
1. [ ] 访问首页，检查页面是否正常加载
2. [ ] 检查左侧菜单是否正常显示
3. [ ] 检查统计卡片是否显示数据
4. [ ] 检查功能区域是否正常显示
5. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 页面正常加载，无错误
- ✅ 菜单结构完整
- ✅ 统计数据正确显示
- ✅ 样式统一美观

---

### 2.2 创建计划

**URL**: `/plan/plans/create/`

**测试步骤**:
1. [ ] 访问创建计划页面
2. [ ] 检查表单字段是否完整显示
3. [ ] 填写必填字段，提交表单
4. [ ] 检查表单验证是否正常工作
5. [ ] 检查创建成功后是否跳转到详情页
6. [ ] 检查创建失败时错误提示是否显示

**测试数据示例**:
```
计划名称: 测试计划2025
计划类型: 年度计划
开始日期: 2025-01-01
结束日期: 2025-12-31
```

**预期结果**:
- ✅ 表单正常显示
- ✅ 必填字段验证正常
- ✅ 创建成功后跳转正确
- ✅ 错误提示清晰明确

---

### 2.3 计划列表

**URL**: `/plan/plans/`

**测试步骤**:
1. [ ] 访问计划列表页面
2. [ ] 检查列表数据是否正常显示
3. [ ] 测试分页功能
4. [ ] 测试筛选功能（状态、类型等）
5. [ ] 测试搜索功能
6. [ ] 点击"查看"按钮，检查跳转
7. [ ] 点击"编辑"按钮，检查跳转
8. [ ] 检查列表样式是否统一

**预期结果**:
- ✅ 列表数据正确显示
- ✅ 分页功能正常
- ✅ 筛选功能正常
- ✅ 搜索功能正常
- ✅ 操作按钮正常跳转
- ✅ 样式统一美观

---

### 2.4 计划详情

**URL**: `/plan/plans/<plan_id>/`

**测试步骤**:
1. [ ] 访问计划详情页面
2. [ ] 检查计划基本信息是否完整显示
3. [ ] 检查关联目标是否显示
4. [ ] 检查执行记录是否显示
5. [ ] 检查操作按钮是否正常（编辑、删除等）
6. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 详情信息完整准确
- ✅ 关联数据正确显示
- ✅ 操作按钮功能正常
- ✅ 样式统一美观

---

### 2.5 目标管理 - 目标列表

**URL**: `/plan/strategic-goals/`

**测试步骤**:
1. [ ] 访问目标列表页面
2. [ ] 检查列表数据是否正常显示
3. [ ] 检查目标编号颜色是否为灰色（非红色）
4. [ ] 测试分页功能
5. [ ] 测试筛选功能（状态、类型、周期等）
6. [ ] 测试搜索功能
7. [ ] 点击"查看"按钮，检查跳转
8. [ ] 点击"编辑"按钮，检查跳转
9. [ ] 检查列表样式是否统一

**预期结果**:
- ✅ 列表数据正确显示
- ✅ 目标编号颜色为灰色（#333333）
- ✅ 分页功能正常
- ✅ 筛选功能正常
- ✅ 搜索功能正常
- ✅ 操作按钮正常跳转
- ✅ 样式统一美观

---

### 2.6 创建战略目标

**URL**: `/plan/strategic-goals/create/`

**测试步骤**:
1. [ ] 访问创建目标页面
2. [ ] 检查目标编号字段是否为只读（系统自动生成）
3. [ ] 检查开始日期是否默认为当天
4. [ ] 选择目标周期，检查结束日期是否自动计算
5. [ ] 填写必填字段，提交表单
6. [ ] 检查表单验证是否正常工作
7. [ ] 检查创建成功后是否跳转到详情页
8. [ ] 检查创建失败时错误提示是否显示

**测试数据示例**:
```
目标名称: 测试目标2025
目标类型: 财务目标
目标周期: 年度目标
指标名称: 营业收入
目标值: 1000
```

**预期结果**:
- ✅ 目标编号只读，系统自动生成
- ✅ 开始日期默认为当天
- ✅ 结束日期根据周期自动计算
- ✅ 表单验证正常
- ✅ 创建成功后跳转正确

---

### 2.7 目标详情

**URL**: `/plan/strategic-goals/<goal_id>/`

**测试步骤**:
1. [ ] 访问目标详情页面
2. [ ] 检查页面是否使用新的列表页模板样式
3. [ ] 检查目标编号颜色是否为灰色（非红色）
4. [ ] 检查基本信息是否完整显示
5. [ ] 检查目标指标是否显示
6. [ ] 检查时间信息是否显示
7. [ ] 检查关联信息是否显示
8. [ ] 检查操作按钮是否正常（返回列表、编辑、跟踪、分解等）
9. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 使用新的列表页模板样式
- ✅ 目标编号颜色为灰色
- ✅ 详情信息完整准确
- ✅ 操作按钮功能正常
- ✅ 样式统一美观

---

### 2.8 目标分解

**URL**: `/plan/strategic-goals/decompose/` 或 `/plan/strategic-goals/<goal_id>/decompose/`

**测试步骤**:
1. [ ] 访问目标分解页面
2. [ ] 检查目标分解树是否正常显示
3. [ ] 检查每个目标卡片是否显示完整信息：
   - 目标名称
   - 目标周期
   - 指标名称
   - 开始日期
   - 结束日期
4. [ ] 检查目标编号颜色是否为灰色（非红色）
5. [ ] 测试创建子目标功能
6. [ ] 检查树形结构展开/折叠功能
7. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 分解树正常显示
- ✅ 目标信息完整显示
- ✅ 目标编号颜色为灰色
- ✅ 创建子目标功能正常
- ✅ 树形结构交互正常
- ✅ 样式统一美观

---

### 2.9 目标跟踪

**URL**: `/plan/strategic-goals/track/` 或 `/plan/strategic-goals/<goal_id>/track/`

**测试步骤**:
1. [ ] 访问目标跟踪页面
2. [ ] 检查跟踪数据是否正常显示
3. [ ] 检查进度图表是否正常显示
4. [ ] 检查目标编号颜色是否为灰色（非红色）
5. [ ] 测试更新进度功能
6. [ ] 检查历史记录是否显示
7. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 跟踪数据正确显示
- ✅ 进度图表正常渲染
- ✅ 目标编号颜色为灰色
- ✅ 更新进度功能正常
- ✅ 历史记录完整显示
- ✅ 样式统一美观

---

### 2.10 统计报表

**URL**: `/plan/analysis/statistics/`

**测试步骤**:
1. [ ] 访问统计报表页面
2. [ ] 检查统计数据是否正常显示
3. [ ] 检查图表是否正常渲染
4. [ ] 测试筛选功能（时间范围、状态等）
5. [ ] 检查数据导出功能（如果有）
6. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 统计数据准确
- ✅ 图表正常渲染
- ✅ 筛选功能正常
- ✅ 样式统一美观

---

### 2.11 完成度分析

**URL**: `/plan/analysis/completion/`

**测试步骤**:
1. [ ] 访问完成度分析页面
2. [ ] 检查分析数据是否正常显示
3. [ ] 检查图表是否正常渲染
4. [ ] 测试筛选功能
5. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 分析数据准确
- ✅ 图表正常渲染
- ✅ 筛选功能正常
- ✅ 样式统一美观

---

### 2.12 目标达成分析

**URL**: `/plan/analysis/goal-achievement/`

**测试步骤**:
1. [ ] 访问目标达成分析页面
2. [ ] 检查分析数据是否正常显示
3. [ ] 检查目标编号颜色是否为灰色（非红色）
4. [ ] 检查图表是否正常渲染
5. [ ] 测试筛选功能
6. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 分析数据准确
- ✅ 目标编号颜色为灰色
- ✅ 图表正常渲染
- ✅ 筛选功能正常
- ✅ 样式统一美观

---

### 2.13 计划审批

**URL**: `/plan/plans/approval/`

**测试步骤**:
1. [ ] 访问计划审批页面
2. [ ] 检查待审批计划列表是否显示
3. [ ] 测试审批功能
4. [ ] 测试拒绝功能
5. [ ] 检查审批历史是否显示
6. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 审批列表正确显示
- ✅ 审批功能正常
- ✅ 拒绝功能正常
- ✅ 审批历史完整
- ✅ 样式统一美观

---

### 2.14 计划执行跟踪

**URL**: `/plan/plans/<plan_id>/execution/`

**测试步骤**:
1. [ ] 访问计划执行跟踪页面
2. [ ] 检查执行数据是否正常显示
3. [ ] 检查进度更新功能
4. [ ] 检查问题列表功能
5. [ ] 检查完成功能
6. [ ] 检查页面样式是否统一

**预期结果**:
- ✅ 执行数据正确显示
- ✅ 进度更新功能正常
- ✅ 问题列表功能正常
- ✅ 完成功能正常
- ✅ 样式统一美观

---

## 三、样式统一性测试

### 3.1 颜色检查

- [ ] 所有表格中的目标编号颜色为灰色（#333333），非红色
- [ ] 按钮样式统一（使用 `list-btn` 类）
- [ ] 卡片样式统一（直角设计）
- [ ] 徽章样式统一（灰色系）

### 3.2 布局检查

- [ ] 列表页布局统一
- [ ] 详情页布局统一
- [ ] 表单页布局统一
- [ ] 响应式布局正常

### 3.3 字体检查

- [ ] 字体大小统一
- [ ] 字体颜色统一
- [ ] 字体粗细统一

---

## 四、功能交互测试

### 4.1 CRUD操作

- [ ] **创建**: 计划、目标创建功能正常
- [ ] **读取**: 列表、详情页面正常显示
- [ ] **更新**: 编辑功能正常，数据保存正确
- [ ] **删除**: 删除功能正常，确认提示正常

### 4.2 数据关联

- [ ] 计划与目标的关联正确
- [ ] 目标与子目标的关联正确
- [ ] 计划与执行记录的关联正确

### 4.3 权限控制

- [ ] 无权限用户无法访问受限页面
- [ ] 权限提示信息清晰
- [ ] 菜单根据权限正确显示/隐藏

---

## 5. 性能测试

### 5.1 页面加载速度

- [ ] 列表页加载时间 < 2秒
- [ ] 详情页加载时间 < 1秒
- [ ] 统计报表加载时间 < 3秒

### 5.2 数据量测试

- [ ] 列表页支持大量数据（100+条记录）
- [ ] 分页功能正常
- [ ] 筛选功能不影响性能

---

## 六、浏览器兼容性测试

### 6.1 浏览器列表

- [ ] Chrome（最新版本）
- [ ] Firefox（最新版本）
- [ ] Safari（最新版本）
- [ ] Edge（最新版本）

### 6.2 测试内容

- [ ] 页面布局正常
- [ ] 样式显示正常
- [ ] JavaScript功能正常
- [ ] 表单提交正常

---

## 七、测试结果记录

### 7.1 测试统计

| 测试项 | 总数 | 通过 | 失败 | 跳过 |
|--------|------|------|------|------|
| 功能测试 | 14 | | | |
| 样式测试 | 3 | | | |
| 交互测试 | 3 | | | |
| 性能测试 | 2 | | | |
| 兼容性测试 | 4 | | | |
| **总计** | **26** | | | |

### 7.2 问题记录

**问题编号**: #001  
**问题描述**:  
**发现时间**:  
**严重程度**: 高/中/低  
**状态**: 待修复/已修复  
**修复时间**:  

---

## 八、测试结论

### 8.1 测试通过标准

- ✅ 所有核心功能正常工作
- ✅ 样式统一美观
- ✅ 无明显性能问题
- ✅ 主流浏览器兼容

### 8.2 测试建议

1. **功能完善**
   - 建议添加数据导出功能
   - 建议添加批量操作功能
   - 建议增强搜索功能

2. **用户体验**
   - 建议添加操作提示
   - 建议优化加载动画
   - 建议添加快捷键支持

3. **性能优化**
   - 建议添加数据缓存
   - 建议优化数据库查询
   - 建议添加分页优化

---

**测试完成时间**: _____________  
**测试人员**: _____________  
**审核人员**: _____________  

---

## 附录：快速测试命令

### 启动开发服务器
```bash
cd /home/devbox/project/vihhi/weihai_tech_production_system
source ../bin/activate  # 或使用 .venv/bin/activate
python manage.py runserver
```

### 运行Django检查
```bash
python manage.py check plan_management
```

### 检查URL配置
```bash
python manage.py show_urls | grep plan
```

### 运行测试（如果有）
```bash
python manage.py test plan_management
```
