# 列表页统计卡片状态一致性检查报告

## 检查时间
2026-01-15

## 检查范围
计划管理模块的所有列表页

## 检查结果

### ✅ 1. 战略目标列表页（strategic_goal_list）

**模型状态定义**：
- `draft` - 制定中
- `published` - 已发布
- `in_progress` - 执行中
- `completed` - 已完成
- `cancelled` - 已取消

**视图统计**：✅ 完整
- `total_count` - 目标总数
- `draft_count` - 制定中
- `published_count` - 已发布
- `in_progress_count` - 执行中
- `completed_count` - 已完成
- `cancelled_count` - 已取消

**模板统计卡片**：✅ 完整
- 所有状态都有对应的统计卡片

**状态**：✅ 已通过检查

---

### ✅ 2. 计划列表页（plan_list）

**模型状态定义**：
- `draft` - 草稿
- `in_progress` - 执行中
- `completed` - 已完成
- `cancelled` - 已取消

**修复前**：
- ❌ 缺少 `draft_count` 统计
- ❌ 模板缺少"草稿"状态卡片

**修复后**：✅ 完整
- `total_count` - 计划总数
- `draft_count` - 草稿（**已添加**）
- `in_progress_count` - 执行中
- `completed_count` - 已完成
- `cancelled_count` - 已取消

**模板统计卡片**：✅ 完整
- 所有状态都有对应的统计卡片

**修复内容**：
1. 在 `views_pages.py` 的 `plan_list` 函数中添加了 `draft_count` 统计
2. 在 `_partials/_plan_stats.html` 模板中添加了"草稿"状态卡片

**状态**：✅ 已修复

---

### ✅ 3. 问题列表页（plan_issue_list）

**模型状态定义**：
- `open` - 待处理
- `in_progress` - 处理中
- `resolved` - 已解决
- `closed` - 已关闭

**修复前**：
- ❌ 缺少 `closed_count` 统计

**修复后**：✅ 完整
- `total_count` - 问题总数
- `open_count` - 待处理
- `in_progress_count` - 处理中
- `resolved_count` - 已解决
- `closed_count` - 已关闭（**已添加**）

**模板统计卡片**：⚠️ 未找到统计卡片模板（可能没有使用统计卡片）

**修复内容**：
1. 在 `views_pages.py` 的 `plan_issue_list` 函数中添加了 `closed_count` 统计

**状态**：✅ 已修复（视图统计完整，模板可能需要添加统计卡片）

---

### ✅ 4. 审批列表页（plan_approval_list）

**说明**：此页面使用的是 `PlanDecision` 模型，不是 `Plan` 模型的状态

**视图统计**：
- `pending_count` - 待审批（启动请求）
- `cancel_count` - 待审批（取消请求）

**模板统计卡片**：⚠️ 未找到统计卡片模板（可能没有使用统计卡片）

**状态**：✅ 通过检查（此页面不使用状态统计卡片，而是按请求类型统计）

---

## 总结

### 已修复的问题
1. ✅ **计划列表页**：添加了缺失的 `draft`（草稿）状态统计和卡片
2. ✅ **问题列表页**：添加了缺失的 `closed`（已关闭）状态统计

### 检查结果
- **战略目标列表页**：✅ 状态完整
- **计划列表页**：✅ 已修复，状态完整
- **问题列表页**：✅ 已修复，视图统计完整
- **审批列表页**：✅ 通过检查（不使用状态统计）

### 建议
1. 问题列表页可以考虑添加统计卡片显示，提升用户体验
2. 审批列表页可以考虑添加统计卡片显示请求类型统计

---

**检查完成时间**：2026-01-15  
**检查人员**：AI Assistant
